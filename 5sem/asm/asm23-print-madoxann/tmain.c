#include <stdio.h>
#include <stdlib.h>
#include <string.h>

void print(char *out_buf, const char *format, const char *hex_number);

char *tests[][3] =
{
	{"", "0", "0"},
        {"", "-0", "0"},
        {"", "", "0"},
        {"", "FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF", "-1"},
        {"", "-FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF", "1"},
        {"", "0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF", "-1"},
        {"", "80000000000000000000000000000000", "-170141183460469231731687303715884105728"},
        {"", "0x80000000000000000000000000000000", "-170141183460469231731687303715884105728"},
        {"", "-80000000000000000000000000000000", "-170141183460469231731687303715884105728"},
        {"", "-0x80000000000000000000000000000000", "-170141183460469231731687303715884105728"},
        {"", "-80000000000000000000000000000001", "170141183460469231731687303715884105727"},
        {"", "-0x80000000000000000000000000000001", "170141183460469231731687303715884105727"},
        {"", "7FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF", "170141183460469231731687303715884105727"},
        {"", "0x7FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF", "170141183460469231731687303715884105727"},
        {"", "0000000001B4E8B2B9330C041A5A3A70", "528190543241472530752092784"},
        {"", "0x0000000001B4E8B2B9330C041A5A3A70", "528190543241472530752092784"},
        {"", "1B4E8B2B9330C041A5A3A70", "528190543241472530752092784"},
        {"", "0x1B4E8B2B9330C041A5A3A70", "528190543241472530752092784"},
        {"", "FFFFFFBD553E3A9DA5FA9FBA9B75442E", "-5281905432414725307520927841234"},
        {"", "0xFFFFFFBD553E3A9DA5FA9FBA9B75442E", "-5281905432414725307520927841234"},
        {"", "503EB222E2", "344649245410"},
        {"", "0x503EB222E2", "344649245410"},
	{"4", "10", "  16"},
	{"-4", "-10", "-16 "},
	{"+", "10", "+16"},
	{" ", "10", " 16"},
	{"+-3", "8Ee4fACF834B20a0b0DE134F630E7342", "-150343060792470555638386732992063179966"},
        {"+-3", "0x8Ee4fACF834B20a0b0DE134F630E7342", "-150343060792470555638386732992063179966"},

        {"8", "0xAF2348", "11477832"},
        {"9", "0xAF2348", " 11477832"},
        {"12", "0xAF2348", "    11477832"},

        {"+8", "0xAF2348", "+11477832"},
        {"+9", "0xAF2348", "+11477832"},
        {"+12", "0xAF2348", "   +11477832"},

        {"-8", "0xAF2348", "11477832"},
        {"-9", "0xAF2348", "11477832 "},
        {"-12", "0xAF2348", "11477832    "},

        {"08", "0xAF2348", "11477832"},
        {"09", "0xAF2348", "011477832"},
        {"012", "0xAF2348", "000011477832"},

        {" 8", "0xAF2348", " 11477832"},
        {" 9", "0xAF2348", " 11477832"},
        {" 12", "0xAF2348", "    11477832"},

        {"+08", "0xAF2348", "+11477832"},
        {"+09", "0xAF2348", "+11477832"},
        {"0+012", "0xAF2348", "+00011477832"},

        {"-+8", "0xAF2348", "+11477832"},
        {"+-9", "0xAF2348", "+11477832"},
        {"-+-12", "0xAF2348", "+11477832   "},

        {"+ 8", "0xAF2348", "+11477832"},
        {" +9", "0xAF2348", "+11477832"},
        {" + 12", "0xAF2348", "   +11477832"},

        {"-08", "0xAF2348", "11477832"},
        {"0-9", "0xAF2348", "11477832 "},
        {"0-012", "0xAF2348", "11477832    "},

        {"- 8", "0xAF2348", " 11477832"},
        {" -9", "0xAF2348", " 11477832"},
        {" -10", "0xAF2348", " 11477832 "},
        {" - 12", "0xAF2348", " 11477832   "},

        {"0 8", "0xAF2348", " 11477832"},
        {" 09", "0xAF2348", " 11477832"},
        {" 0 10", "0xAF2348", " 011477832"},
        {" 0 12", "0xAF2348", " 00011477832"},

        {"+- 8", "0xAF2348", "+11477832"},
        {" -+9", "0xAF2348", "+11477832"},
        {"+- 10", "0xAF2348", "+11477832 "},
        {"+- 12", "0xAF2348", "+11477832   "},

        {"+-08", "0xAF2348", "+11477832"},
        {"0-+9", "0xAF2348", "+11477832"},
        {"+-010", "0xAF2348", "+11477832 "},
        {"+-012", "0xAF2348", "+11477832   "},

        {"+ 08", "0xAF2348", "+11477832"},
        {"0 +9", "0xAF2348", "+11477832"},
        {"+ 010", "0xAF2348", "+011477832"},
        {"+ 012", "0xAF2348", "+00011477832"},

        {"- 08", "0xAF2348", " 11477832"},
        {"0 -9", "0xAF2348", " 11477832"},
        {"- 010", "0xAF2348", " 11477832 "},
        {"- 012", "0xAF2348", " 11477832   "},

        {"-+ 08", "0xAF2348", "+11477832"},
        {"0 +-9", "0xAF2348", "+11477832"},
        {"- +010", "0xAF2348", "+11477832 "},
        {"- +012", "0xAF2348", "+11477832   "},

        // -
        {"8", "-0xAF2348", "-11477832"},
        {"9", "-0xAF2348", "-11477832"},
        {"12", "-0xAF2348", "   -11477832"},

        {"+8", "-0xAF2348", "-11477832"},
        {"+9", "-0xAF2348", "-11477832"},
        {"+12", "-0xAF2348", "   -11477832"},

        {"-8", "-0xAF2348", "-11477832"},
        {"-9", "-0xAF2348", "-11477832"},
        {"-12", "-0xAF2348", "-11477832   "},

        {"08", "-0xAF2348", "-11477832"},
        {"09", "-0xAF2348", "-11477832"},
        {"012", "-0xAF2348", "-00011477832"},

        {" 8", "-0xAF2348", "-11477832"},
        {" 9", "-0xAF2348", "-11477832"},
        {" 12", "-0xAF2348", "   -11477832"},

        {"+08", "-0xAF2348", "-11477832"},
        {"+09", "-0xAF2348", "-11477832"},
        {"0+012", "-0xAF2348", "-00011477832"},

        {"-+8", "-0xAF2348", "-11477832"},
        {"+-9", "-0xAF2348", "-11477832"},
        {"-+-12", "-0xAF2348", "-11477832   "},

        {"+ 8", "-0xAF2348", "-11477832"},
        {" +9", "-0xAF2348", "-11477832"},
        {" + 12", "-0xAF2348", "   -11477832"},

        {"-08", "-0xAF2348", "-11477832"},
        {"0-9", "-0xAF2348", "-11477832"},
        {"0-012", "-0xAF2348", "-11477832   "},

        {"- 8", "-0xAF2348", "-11477832"},
        {" -9", "-0xAF2348", "-11477832"},
        {" -10", "-0xAF2348", "-11477832 "},
        {" - 12", "-0xAF2348", "-11477832   "},

        {"0 8", "-0xAF2348", "-11477832"},
        {" 09", "-0xAF2348", "-11477832"},
        {" 0 10", "-0xAF2348", "-011477832"},
        {" 0 12", "-0xAF2348", "-00011477832"},

        {"+- 8", "-0xAF2348", "-11477832"},
        {" -+9", "-0xAF2348", "-11477832"},
        {"+- 10", "-0xAF2348", "-11477832 "},
        {"+- 12", "-0xAF2348", "-11477832   "},

        {"+-08", "-0xAF2348", "-11477832"},
        {"0-+9", "-0xAF2348", "-11477832"},
        {"+-010", "-0xAF2348", "-11477832 "},
        {"+-012", "-0xAF2348", "-11477832   "},

        {"+ 08", "-0xAF2348", "-11477832"},
        {"0 +9", "-0xAF2348", "-11477832"},
        {"+ 010", "-0xAF2348", "-011477832"},
        {"+ 012", "-0xAF2348", "-00011477832"},

        {"- 08", "-0xAF2348", "-11477832"},
        {"0 -9", "-0xAF2348", "-11477832"},
        {"- 010", "-0xAF2348", "-11477832 "},
        {"- 012", "-0xAF2348", "-11477832   "},

        {"-+ 08", "-0xAF2348", "-11477832"},
        {"0 +-9", "-0xAF2348", "-11477832"},
        {"- +010", "-0xAF2348", "-11477832 "},
        {"- +012", "-0xAF2348", "-11477832   "},
};

int main(void)
{
	int passed = 0, all = sizeof(tests)/sizeof(*tests);
	for (int t = 0; t < all; t++)
	{
		printf("format '%s', number '%s', expected '%s'", tests[t][0], tests[t][1], tests[t][2]);
		char buf[50];
		print(buf, tests[t][0], tests[t][1]);
		int ok = !strcmp(buf, tests[t][2]);
		printf(", got '%s', result: %s\n", buf, ok ? "OK" : "FAIL");
		passed += ok;
	}
  	return all - passed;
}
